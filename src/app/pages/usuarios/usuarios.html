<div class="p-fluid">
  <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">
    <div class="p-field">
      <label for="name">Nombre</label>
  <input id="name" type="text" pInputText formControlName="name" [ngClass]="{'ng-invalid': submitted && usuarioForm.controls['name'].invalid}" />
  <div *ngIf="submitted && usuarioForm.controls['name'].invalid" class="p-error">El nombre es obligatorio</div>
    </div>
    <div class="p-field">
      <label for="email">Email</label>
  <input id="email" type="email" pInputText formControlName="email" [ngClass]="{'ng-invalid': submitted && usuarioForm.controls['email'].invalid}" />
  <div *ngIf="submitted && usuarioForm.controls['email'].invalid" class="p-error">Email válido obligatorio</div>
    </div>
    <div class="p-field">
      <label for="rol">Rol</label>
  <input id="rol" type="text" pInputText formControlName="rol" [ngClass]="{'ng-invalid': submitted && usuarioForm.controls['rol'].invalid}" />
  <div *ngIf="submitted && usuarioForm.controls['rol'].invalid" class="p-error">El rol es obligatorio</div>
    </div>
    <button pButton type="submit" label="Guardar" [disabled]="loading"></button>
    <!-- Botones de exportación -->
    <button (click)="exportarExcel()">Exportar a Excel</button>
    <button (click)="exportarPDF()">Exportar a PDF</button>
  </form>
</div>

<p-table [value]="usuarios" [loading]="loading">
  <ng-template pTemplate="header">
    <tr>
      <th>Nombre</th>
      <th>Email</th>
      <th>Rol</th>
      <th>Acciones</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-usuario>
    <tr>
      <td>{{ usuario.name }}</td>
      <td>{{ usuario.email }}</td>
      <td>{{ usuario.rol }}</td>
      <td>
        <button pButton icon="pi pi-trash" class="p-button-danger" (click)="deleteUsuario(usuario)" *ngIf="isAdmin"></button>
      </td>
    </tr>
  </ng-template>
</p-table>
<p-toast></p-toast>
